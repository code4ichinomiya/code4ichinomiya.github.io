<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8">
<title>擬似AR水族館</title>

<script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>

<style>
  body { margin: 0; overflow: hidden; }
</style>

<script>
/* ゆらゆら動く */
AFRAME.registerComponent('float', {
  schema: {
    speed: {default: 1},
    height:{default: 0.2}
  },
  tick: function (time) {
    const y = Math.sin(time / 1000 * this.data.speed) * this.data.height;
    this.el.object3D.position.y = y;
  }
});

/* 横に泳ぐ */
AFRAME.registerComponent('swim', {
  schema: {
    speed: {default: 0.0004}
  },
  tick: function (time, delta) {
    this.el.object3D.position.x += this.data.speed * delta;
    if (this.el.object3D.position.x > 1.6) {
      this.el.object3D.position.x = -1.6;
    }
  }
});
</script>
</head>

<body>

<a-scene embedded>

  <!-- 海の背景 -->
  <a-sky src="images/back.jpg" rotation="0 -90 0"></a-sky>

  <!-- 子どもの魚 -->
  <a-image
    src="images/ogp.png"
    position="-1 0 -2"
    scale="0.7 0.7 0.7"
    float="speed:1.2"
    swim>
  </a-image>

  <a-image
    src="images/ogp.png"
    position="0.5 0.5 -2"
    scale="0.6 0.6 0.6"
    float="speed:0.8"
    swim="speed:0.0002">
  </a-image>

  <!-- カメラ -->
  <a-entity camera look-controls></a-entity>

</a-scene>

</body>
</html>